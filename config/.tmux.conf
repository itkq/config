# prefix
set-option -g prefix C-q

set-option -g status-interval 1

bind a source-file ~/.tmux.conf \; display-message "reload"
# source "/Users/itako/Library/Python/2.7/lib/python/site-packages/powerline/bindings/tmux/powerline.conf"

# キーストロークのディレイを減らす
set -sg escape-time 1

# ウィンドウのインデックスを1から始める
set -g base-index 1

# 日本語対応
setw -g utf8 on
set -g status-utf8 on

# キーバインドをvi風に
set-window-option -g mode-keys vi

# マウス操作
# set -g mode-mouse on
# set -g mouse-resize-pane on
# set -g mouse-select-pane on
# set -g mouse-select-window on
# set-window-option -g mode-mouse on
set-option -g mouse on
bind -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'copy-mode -e'"

# powerline
set-option -g status on
set-option -g status-utf8 on
# set-option -g status-justify "centre"
set-option -g status-left "#(~/tmux-powerline/powerline.sh left)"
set-option -g status-right "#(~/tmux-powerline/powerline.sh right)"
set-option -g status-left-length 100
set -g status-fg colour231
set -g status-bg colour234
# set -g window-status-format "#[fg=colour244,bg=colour234]  #I #[fg=colour238]⮁ #[fg=colour244]#W "
# set -g window-status-current-format "#[fg=colour234,bg=colour31]⮀#[fg=colour117,bg=colour31] #I ⮁ #[fg=colour231,bold]#W #[fg=colour31,bg=colour234,nobold]⮀"
set -g window-status-format " #[fg=colour244,bg=colour234]#I #[fg=colour238]#[fg=colour244]#W "
set -g window-status-current-format "#[fg=colour234,bg=colour31]#[fg=colour117,bg=colour31] #I #[fg=colour231,bold]#W #[fg=colour31,bg=colour234,nobold]"
#
# 256色対応
# set -g default-terminal "screen-256color"
set -g default-terminal "xterm-256color"
# set -g default-terminal "xterm"
set -g terminal-overrides "term:colors=256"
set -g display-time 2000

# Keybind ウィンド分割
bind | split-window -h #縦分割
bind - split-window -v #横分割

# Keybind ウィンド切り替え
bind -r C-p select-window -t :-
bind -r C-n select-window -t :+

# Keybind ペイン切り替え(Vim風)
bind j select-pane -D #down
bind k select-pane -U #up
bind h select-pane -L #left
bind l select-pane -R #right

# カーソルキーでペインの大きさ変更(連打対応)
bind -r Up resize-pane -U
bind -r Down resize-pane -D
bind -r Left resize-pane -L
bind -r Right resize-pane -R

# クリップボードコピー
setw -g mode-keys vi

# Setup 'v' to begin selection as in Vim
bind-key -t vi-copy v begin-selection
bind-key -t vi-copy y copy-pipe "reattach-to-user-namespace pbcopy"

# Update default binding of `Enter` to also use copy-pipe
unbind -t vi-copy Enter
bind-key -t vi-copy Enter copy-pipe "reattach-to-user-namespace pbcopy"

set -g default-command "reattach-to-user-namespace -l ${SHELL}"

set -g @tpm_plugins '              \
  tmux-plugins/tpm                 \
  tmux-plugins/tmux-open           \
  tmux-plugins/tmux-resurrect      \
  tmux-plugins/tmux-battery        \
  tmux-plugins/tmux-pain-control   \
'

run-shell '~/.tmux/plugins/tpm/tpm'
